{% extends "base-logged.html" %}

{% block title %}Checkout{% endblock %}

{% block content %}

<main class="checkout-container">
    <h1>Checkout</h1>

    <!-- Resumo do Pedido -->
    <section class="order-summary">
        <h2>Resumo do Pedido</h2>
        {% if cart %}
            <div class="order-items">
                {% for item in cart %}
                    <div class="item">
                        <img src="{{ url_for('static', filename='images/' + item['image']) }}" alt="{{ item['name'] }}" class="order-item-image">
                        <div class="item-info">
                            <h3>{{ item['name'] }}</h3>
                            <p>Preço: R$ {{ '%.2f' % item['price'] }}</p>
                            <p>Tamanho: {{ item['size'] }}</p>
                            <p>Quantidade: {{ item['quantity'] }}</p>
                            <p>Total: R$ {{ '%.2f' % (item['price'] * item['quantity']) }}</p>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <p class="order-total">Subtotal: R$ {{ '%.2f' % total_price }}</p>
        {% else %}
            <p>Seu carrinho está vazio.</p>
        {% endif %}
    </section>

    <!-- Formulário de Pagamento -->
    <section class="payment-section">
        <h2>Forma de Pagamento</h2>
        <div class="payment-options">
            <label>
                <input type="radio" name="payment" value="pix" onchange="togglePaymentFields()"> Pix
            </label>
            <label>
                <input type="radio" name="payment" value="boleto" onchange="togglePaymentFields()"> Boleto Bancário
            </label>
            <label>
                <input type="radio" name="payment" value="credit-card" checked onchange="togglePaymentFields()"> Cartão de Crédito/Débito
            </label>
        </div>

        <!-- Credit Card Payment Form -->
        <div id="credit-card-form">
            <form class="payment-form">
                <div class="form-group">
                    <label for="card-number">Número do Cartão</label>
                    <input type="text" id="card-number" placeholder="0000 0000 0000 0000">
                </div>
                <div class="form-group">
                    <label for="card-name">Nome no Cartão</label>
                    <input type="text" id="card-name" placeholder="Nome completo">
                </div>
                <div class="form-group">
                    <label for="card-expiry">Validade</label>
                    <input type="text" id="card-expiry" placeholder="MM/AA">
                </div>
                <div class="form-group">
                    <label for="card-cvv">CVV</label>
                    <input type="text" id="card-cvv" placeholder="123">
                </div>
                <button type="submit" class="btn-submit">Confirmar Pagamento</button>
            </form>
        </div>

        <!-- Pix Payment Form -->
        <div id="pix-form" style="display:none;">
            <form class="payment-form">
                <p>Pagamento via Pix selecionado. Realize a transferência para a chave informada após a confirmação do pedido.</p>
                <button type="submit" class="btn-submit">Confirmar Pagamento</button>
            </form>
        </div>

        <!-- Boleto Payment Form -->
        <div id="boleto-form" style="display:none;">
            <form class="payment-form">
                <p>Pagamento via Boleto Bancário selecionado. Após a confirmação, o boleto será gerado.</p>
                <button type="submit" class="btn-submit">Confirmar Pagamento</button>
            </form>
        </div>

    </section>
</main>

{% endblock %}
